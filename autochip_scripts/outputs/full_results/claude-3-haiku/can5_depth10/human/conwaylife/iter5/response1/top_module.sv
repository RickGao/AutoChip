module top_module(
    input clk,
    input load,
    input [255:0] data,
    output reg [255:0] q
);

reg [255:0] next_q;

always @(posedge clk) begin
    if (load) begin
        q <= data;
    end
    else begin
        q <= next_q;
    end
end

always @(*) begin
    // Compute the next state of the game
    next_q[255:240] = (({q[254:240], q[15:1]} & {16{q[255:240]}}) | ({q[255:240], q[15:1]} & ~{16{q[254:240] | q[15:1]}}));
    next_q[239:224] = (({q[238:224], q[31:17]} & {16{q[239:224]}}) | ({q[239:224], q[31:17]} & ~{16{q[238:224] | q[31:17]}}));
    next_q[223:208] = (({q[222:208], q[47:33]} & {16{q[223:208]}}) | ({q[223:208], q[47:33]} & ~{16{q[222:208] | q[47:33]}}));
    next_q[207:192] = (({q[206:192], q[63:49]} & {16{q[207:192]}}) | ({q[207:192], q[63:49]} & ~{16{q[206:192] | q[63:49]}}));
    next_q[191:176] = (({q[190:176], q[79:65]} & {16{q[191:176]}}) | ({q[191:176], q[79:65]} & ~{16{q[190:176] | q[79:65]}}));
    next_q[175:160] = (({q[174:160], q[95:81]} & {16{q[175:160]}}) | ({q[175:160], q[95:81]} & ~{16{q[174:160] | q[95:81]}}));
    next_q[159:144] = (({q[158:144], q[111:97]} & {16{q[159:144]}}) | ({q[159:144], q[111:97]} & ~{16{q[158:144] | q[111:97]}}));
    next_q[143:128] = (({q[142:128], q[127:113]} & {16{q[143:128]}}) | ({q[143:128], q[127:113]} & ~{16{q[142:128] | q[127:113]}}));
    next_q[127:112] = (({q[126:112], q[143:129]} & {16{q[127:112]}}) | ({q[127:112], q[143:129]} & ~{16{q[126:112] | q[143:129]}}));
    next_q[111:96]  = (({q[110:96], q[159:145]} & {16{q[111:96]}})  | ({q[111:96], q[159:145]}  & ~{16{q[110:96] | q[159:145]}}));
    next_q[95:80]   = (({q[94:80], q[175:161]} & {16{q[95:80]}})   | ({q[95:80], q[175:161]}   & ~{16{q[94:80] | q[175:161]}}));
    next_q[79:64]   = (({q[78:64], q[191:177]} & {16{q[79:64]}})   | ({q[79:64], q[191:177]}   & ~{16{q[78:64] | q[191:177]}}));
    next_q[63:48]   = (({q[62:48], q[207:193]} & {16{q[63:48]}})   | ({q[63:48], q[207:193]}   & ~{16{q[62:48] | q[207:193]}}));
    next_q[47:32]   = (({q[46:32], q[223:209]} & {16{q[47:32]}})   | ({q[47:32], q[223:209]}   & ~{16{q[46:32] | q[223:209]}}));
    next_q[31:16]   = (({q[30:16], q[239:225]} & {16{q[31:16]}})   | ({q[31:16], q[239:225]}   & ~{16{q[30:16] | q[239:225]}}));
    next_q[15:0]    = (({q[14:0], q[255:241]} & {16{q[15:0]}})    | ({q[15:0], q[255:241]}    & ~{16{q[14:0] | q[255:241]}}));
end

endmodule

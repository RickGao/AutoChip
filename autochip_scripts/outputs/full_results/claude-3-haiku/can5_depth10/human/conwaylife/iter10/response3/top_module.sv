module top_module(
    input clk,
    input load,
    input [255:0] data,
    output reg [255:0] q
);

reg [255:0] next_q;

always @(posedge clk) begin
    if (load) begin
        q <= data;
    end
    else begin
        q <= next_q;
    end
end

always @(*) begin
    next_q[255:240] = ((q[255:240] & ~{16{q[254:240]}}) | ({16{q[255]}} & (q[254:240] & {16{q[254:240]}}))) & 16'hFFFF;
    next_q[239:224] = ((q[239:224] & ~{16{q[238:224]}}) | ({16{q[239]}} & (q[238:224] & {16{q[238:224]}}))) & 16'hFFFF;
    next_q[223:208] = ((q[223:208] & ~{16{q[222:208]}}) | ({16{q[223]}} & (q[222:208] & {16{q[222:208]}}))) & 16'hFFFF;
    next_q[207:192] = ((q[207:192] & ~{16{q[206:192]}}) | ({16{q[207]}} & (q[206:192] & {16{q[206:192]}}))) & 16'hFFFF;
    next_q[191:176] = ((q[191:176] & ~{16{q[190:176]}}) | ({16{q[191]}} & (q[190:176] & {16{q[190:176]}}))) & 16'hFFFF;
    next_q[175:160] = ((q[175:160] & ~{16{q[174:160]}}) | ({16{q[175]}} & (q[174:160] & {16{q[174:160]}}))) & 16'hFFFF;
    next_q[159:144] = ((q[159:144] & ~{16{q[158:144]}}) | ({16{q[159]}} & (q[158:144] & {16{q[158:144]}}))) & 16'hFFFF;
    next_q[143:128] = ((q[143:128] & ~{16{q[142:128]}}) | ({16{q[143]}} & (q[142:128] & {16{q[142:128]}}))) & 16'hFFFF;
    next_q[127:112] = ((q[127:112] & ~{16{q[126:112]}}) | ({16{q[127]}} & (q[126:112] & {16{q[126:112]}}))) & 16'hFFFF;
    next_q[111:96] = ((q[111:96] & ~{16{q[110:96]}}) | ({16{q[111]}} & (q[110:96] & {16{q[110:96]}}))) & 16'hFFFF;
    next_q[95:80] = ((q[95:80] & ~{16{q[94:80]}}) | ({16{q[95]}} & (q[94:80] & {16{q[94:80]}}))) & 16'hFFFF;
    next_q[79:64] = ((q[79:64] & ~{16{q[78:64]}}) | ({16{q[79]}} & (q[78:64] & {16{q[78:64]}}))) & 16'hFFFF;
    next_q[63:48] = ((q[63:48] & ~{16{q[62:48]}}) | ({16{q[63]}} & (q[62:48] & {16{q[62:48]}}))) & 16'hFFFF;
    next_q[47:32] = ((q[47:32] & ~{16{q[46:32]}}) | ({16{q[47]}} & (q[46:32] & {16{q[46:32]}}))) & 16'hFFFF;
    next_q[31:16] = ((q[31:16] & ~{16{q[30:16]}}) | ({16{q[31]}} & (q[30:16] & {16{q[30:16]}}))) & 16'hFFFF;
    next_q[15:0] = ((q[15:0] & ~{16{q[14:0]}}) | ({16{q[15]}} & (q[14:0] & {16{q[14:0]}}))) & 16'hFFFF;
end

endmodule
